## Как делать ассемблерные вставки в коде на Си?

```c++
__asm__(
  "инструкции" 
  : выходные_операнды    // [выход] "ограничение"(переменная)
  : входные_операнды     // [вход] "ограничение"(переменная)
  : clobber_список       // что портим
);
```

#### Операнды:
* `%0`, `%1`, `%2` — ссылки на операнды по номеру 
* `%[имя]` — именованные операнды

#### Ограничения:
* `r` — любой регистр
* `m` — память
* `i` — константа
* `=r` — выход только для записи
* `+r` — вход/выход (читаем и пишем)

#### Clobber список:
* `eax`, `ebx` — регистры, которые портим
* `cc` — изменяем флаги (condition codes)

### Зачем нужно слово `volatile`?

* `volatile` применяется, чтобы компилятор не пытался оптимизировать выполнение программы.
Если быть точнее: чтобы он каждый раз проверял условие или переменную, заходя в память.
Это потратит больше времени, но программа будет корректно работать при ассемблерных вставках. 

### Приведите простейший пример, сделайте обмен значений двух переменных через ассемблерную вставку. 

* #### см. пример

### Как с помощью ассемблерной вставки узнать количество тактов процессора, прошедшее между двумя данными строчками кода?

* #### см. пример `rdtsc`

### Как применяются ассемблерные вставки в криптографии для защиты от timing attacks?

**Timing attack** — атака по времени выполнения, когда атакующий измеряет время операций чтобы извлечь секретные данные (например, ключи шифрования).

Суть подхода заключается в том, что мы конструируем программу таким образом, что время выполнения веток `if/else` не зависит от
секретных данных, что не позволяет злоумышленнику по времени выполнения программы находить уязвимости.